#########################################################
# Trakx YAML config
#   All time is measured in seconds
# All values in this can be overridden with env vars
#   For example: `export TRAKX_TRAKX_PROD=FALSE`

trakx:
  prod: true
  index: "/usr/local/etc/trakx/trakx.html"
  expvar:
    # How often to update expvar vals
    every: 1
  pprof:
    # Port to serve pprof over, 0 to disable
    port: 1338
  # Essentially max socket limit, use 0 for default
  ulimit: 99999

tracker:
  http:
    # If disabled the tracker will still run and index and DMCA page
    enabled: true
    # HTTP port to serve, also serves index ect.
    port: 1337
    # TCP timeouts
    readtimeout: 3
    writetimeout: 10
    # Maximum size of connection queue
    qsize: 100000
    # Number of TCP accept() goroutines
    accepters: 5
    # Number of worker goroutines that the connection queue
    threads: 2048
  udp:
    enabled: true
    port: 1337
    # Validate connection IDS, if disabled tracker can be abused as UDP amplification
    checkconnid: true
    threads: 1024
  numwant:
    # Default maximum number of peers if none specified
    default: 75
    # Maximum number of requested peers, if exceeded the request is set to the default
    limit: 300
  # Announce interval for clients
  announce: 1800 # 30 min
  # Announce fuzz will add between this and 0 to the announce to smooth out announce spikes
  announcefuzz: 300 # 5 min

database:
  # Database type options:
  #   gomap - In memory database using golang maps
  type: "gomap"
  
  # Backup type options for gomap database:
  #   file  - Writes databse to file
  #   pg    - Write databse to postgres
  #   none  - Doesn't backup database
  backup: "none"
  
  peer:
    filename: "/usr/local/etc/trakx/peers.db"
    # How often to check and remove expired peers
    trim: 600 # 10 min
    # How often to backup database in case of crash, 0 to disable
    write: 0
    # Maximum peer age before removal
    timeout: 2400 # 40 min
  conn:
    filename: "/usr/local/etc/trakx/conn.db"
    # How often to check and remove expired UDP connection IDs
    trim: 600 # 10 min
    # Maximum UDP connection ID age before removal
    timeout: 1800 # 30 min
